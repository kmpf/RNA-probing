package ProbingRNA::RDATFile;

use strict;
use warnings;

my @keywords = ("experimentType", "temperature", "modifier", "processing", "chemical", "mutation");

sub new {
    my $self = {};
    my $classname = shift;

    $self->{FILENAME} = shift;
    $self->{RDAT_VERSION} = undef;
    $self->{NAME} = undef;
    $self->{SEQUENCE} = undef;
    $self->{STRUCTURE} = undef;
    $self->{OFFSET} = undef;
    $self->{SEQPOS} = undef;
    $self->{MUTPOS} = undef;
    $self->{ANNOTATION} = {};
    $self->(COMMENT) = undef;

    open ( RDAT_FILE , "<$self->{FILENAME}");
    while ($line = <RDAT_FILE>) {
        my @words =  split(/\s+/, $line, 2);
        print join('!', @words);
        $self->{RDAT_VERSION} = split( /\s+/, $words[1])    if ($words[0] = /RDAT_VERSION/);
        $self->{NAME} = $words[1]                           if ($words[0] = /NAME/);
        $self->{SEQUENCE} = $words[1]                       if ($words[0] = /SEQUENCE/);
        $self->{STRUCTURE} = $words[1]                      if ($words[0] = /STRUCTURE/);
        $self->{OFFSET} = $words[1]                         if ($words[0] = /OFFSET/);
        $self->{SEQPOS} = split( /\s+/, $words[1])          if ($words[0] = /SEQPOS/);
        $self->{MUTPOS} = split( /\s+/, $words[1])          if ($words[0] = /MUTPOS/);
        $self->{MUTPOS} = &_parse_annotation($words[1])     if ($words[0] = /ANNOTATION/);
        $self->{COMMENT} .= $words[1]                       if ($words[0] = /COMMENT/);


    bless( $self, $classname );
    return $self;
}

sub _parse_annotation {
    my $line = shift;
    
    
    foreach my $i ( $words[1] ) {
        %annotation = split (':', $i, 2);
    }
}

sub name {
    my $self = shift;
    return $self->{NAME};
}



1;
